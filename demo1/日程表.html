<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
		 crossorigin="anonymous">
		<title>半年之约，无悔之路</title>
		<!-- <meta http-equiv="refresh" content="0.99"> -->
		<!-- 这里设置页面每0.99秒刷新一次，浏览器刷新需要时间缓冲 -->
		<style type="text/css">
			.h3 {
				text-align: center;
				display: inline;
			}

			#theState {
				display: inline-block;
				color: dodgerblue;
			}

			#countDown {
				display: inline;
			}

			#section {
				margin: 12px 0 0 0;
			}

			.child_problem_div {
				min-height: 55px;
			}
			body{
				background: #F5F6F7;
			}
			.nav{
				background: #fff;
				border: 1px solid #aaa;
				margin:5px;
				border-radius: 6px;
			}
		</style>
	</head>

	<body>


		<header id="header">

			<nav class="navbar navbar-expand-lg navbar-light nav">
				<a class="navbar-brand" href="#">Navbar</a>
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
				 aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>

				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav mr-auto">
						<li class="nav-item active">
							<a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">Link</a>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
							 aria-haspopup="true" aria-expanded="false">
								Dropdown
							</a>
							<div class="dropdown-menu" aria-labelledby="navbarDropdown">
								<a class="dropdown-item" href="#">Action</a>
								<a class="dropdown-item" href="#">Another action</a>
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="#">Something else here</a>
							</div>
						</li>
						<li class="nav-item">
							<a class="nav-link disabled" href="#">Disabled</a>
						</li>
					</ul>
					<form class="form-inline my-2 my-lg-0">
						<input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
						<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
					</form>
				</div>
			</nav>

		</header>

		<article id="articled">

			<div class="container">

				<div class="list-group show_div" id="section">
					<div class="list-group-item list-group-item-action child_problem_div">
						<h3 class="color-blue">日程表</h3>
					</div>

					<div class="list-group-item list-group-item-action child_problem_div">
						<!-- 显示工作状态 -->
						现工作状态：<h6 id="theState" style="display: inline;"></h6>
					</div>

					<div class="list-group-item list-group-item-action child_problem_div">
						<!-- 显示当前时间 -->
						<h6 id="timeNow"></h6>
					</div>

					<div class="list-group-item list-group-item-action child_problem_div">
						<h6>距离半年之约还有：<p id="countDown"></p>
						</h6>
					</div>

				</div>

				<div class="list-group show_div section" id="section">
					<div class="list-group-item list-group-item-action child_problem_div" id="bobo">
						<h6>每天任务</h6>
					</div>

					<div class="list-group-item list-group-item-action child_problem_div">
						<h6>打卡早上7点</h6>
					</div>

					<div class="list-group-item list-group-item-action child_problem_div">
						<h6>打卡晚上11点</h6>
					</div>




				</div>

				<div class="list-group show_div section" id="section">
					<div class="list-group-item list-group-item-action child_problem_div">
						<audio id="music" controls preload src="">
						</audio><br>
					</div>
				</div>
			</div>
		</article>


	</body>

	<script type="text/javascript">
		// var count=0;
		// count = localStorage.getItem('COUNT');
		// console.log(count);
		// localStorage.setItem('COUNT',count);

		var count2 = document.getElementById('countDown');
		var nowTime = document.getElementById('timeNow');
		var date2 = new Date("2020-01-31T23:59:59").getTime();
		var state = 0;

		// var fightingTime = theDate - dateNow;
		//日期只能比较,不能直接求倒计时
		//求倒计时要化成毫秒来加减,setTime()方法

		function myrefresh() {
			var date3 = new Date()
			var date1 = date3.getTime();
			var remainingTime = (date2 - date1).toString();
			let day = Math.floor(remainingTime / 1000 / 60 / 60 / 24);
			let hours = Math.floor(remainingTime / 1000 / 60 / 60 - 24 * day);
			let miniutes = Math.floor(remainingTime / 1000 / 60 - 24 * 60 * day - 60 * hours);
			let seconds = Math.floor(remainingTime / 1000 - 24 * 60 * 60 * day - 60 * 60 * hours - 60 * miniutes);
			let string = day + "天" + hours + "小时" + miniutes + "分钟" + seconds + "秒";

			count2.innerHTML = string;

			nowTime.innerHTML = "现在的时间：" + date3.getFullYear() + "年" + (date3.getMonth() + 1) +
				"月" + date3.getDate() + "日" + date3.getHours() + "小时" +
				date3.getMinutes() + "分" + date3.getSeconds() + "秒";
			// console.log(count2);
		}

		var aut = document.getElementById('music');

		var setMyTime = function() {
			var nowHours = new Date().getHours();
			var nowMiniutes = new Date().getMinutes();
			var stateLable = document.getElementById('theState');

			// nowHours=12;
			// nowMiniutes=01;

			// nowHours = 22;
			// nowMiniutes = 01;

			// console.log(nowHours);

			if (nowHours > 7 && nowHours < 12 || (nowHours == 12 && nowMiniutes == 00) || nowHours == 7 && nowMiniutes >= 30) {
				stateLable.innerHTML = "上午上班中，工作时间为 7:30 到 12:00";
				if (nowHours == 7 && nowMiniutes == 30) {
					state = 1;
					aut.src = "./music/上午上班中.wav";
					aut.play();
				}

			} else if (nowHours >= 14 && nowHours < 18 || (nowHours == 18 && nowMiniutes == 00)) {
				stateLable.innerHTML = "下午上班中，工作时间为 14:00 到 18:00";
				if (nowHours == 14 && nowMiniutes <= 01) {
					state = 1;
					aut.src = "./music/下午上班中.wav";
					aut.play();
				}

			} else if (nowHours >= 19 && nowHours < 22 || nowHours == 22 && nowMiniutes == 00) {
				stateLable.innerHTML = "晚上上班中，工作时间为 19:00 到 22:00";
				if (nowHours == 19 && nowMiniutes <= 01) {
					state = 1;
					aut.src = "./music/晚上加班中.wav"
					aut.play();
				}

			} else {
				stateLable.innerHTML = "下班时间到了，请注意休息";
				if (nowHours == 22 || nowHours == 18 || nowHours == 12) {
					state = 2;
					// aut.src = './music/下班时间到了.wav';
					// aut.src = './music/郭琳然 - 有多爱你.mp3';
					aut.src = './music/恋爱的味道.mp3';
					aut.volume = 0.5;
					aut.play();
				}


			}
		};

		aut.addEventListener('ended', function() {
			state = 0;
		}, false);

		//执行
		myrefresh();
		setMyTime();

		var bobo = document.querySelector('#bobo');
		bobo.addEventListener('mousemove', setBg);

		function setBg(e) {
			// bobo.style.backgroundColor = `rgb(${e.offsetX},${e.offsetY},40)`;
		}


		if (state == 0) {
			window.setTimeout(function() {
				location.reload()
			}, 990); //1秒后执行
		} else if (state == 1) {
			window.setTimeout(function() {
				location.reload()
			}, 20000); //20秒，20s后执行刷新
		} else if (state == 2) {
			window.setTimeout(function() {
				location.reload()
			}, 300000); //300秒，5分钟后执行刷新
		}

		// setTimeout('myrefresh()', 500); //指定1秒刷新一次
	</script>


	<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
	 crossorigin="anonymous"></script>
	<script src="https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
	 crossorigin="anonymous"></script>
	<script src="https://cdn.bootcss.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
	 crossorigin="anonymous"></script>
</html>
